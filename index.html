<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Nandini Lashkari — Immersive Tech Portfolio (Markerless WebAR)</title>
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <style>
    body { margin: 0; overflow: hidden; background: #000; font-family: Arial, sans-serif; }
    #loader { 
      position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
      background: rgba(0,0,0,0.95); display: flex; flex-direction: column; 
      justify-content: center; align-items: center; color: #0ff; z-index: 10; 
      text-align: center; 
    }
    #loader.hidden { display: none; }
    #enter-ar { 
      background: rgba(0,255,255,0.2); border: 2px solid #0ff; color: #0ff; 
      padding: 15px 30px; border-radius: 10px; font-size: 18px; cursor: pointer; 
      margin-top: 20px; 
    }
    #hint { position: absolute; bottom: 20px; left: 0; width: 100%; text-align: center; color: #0ff; z-index: 5; }
    .holo-glow { text-shadow: 0 0 10px #0ff; }
  </style>
</head>
<body>
  <div id="loader">
    <div style="font-size: 24px; margin-bottom: 10px;">Nandini Lashkari</div>
    <div style="font-size: 18px; margin-bottom: 20px;">Immersive Tech Portfolio</div>
    <div>Point at a flat surface to place the holographic panel</div>
    <button id="enter-ar" onclick="enterAR()">Enter AR</button>
  </div>
  <div id="hint" class="holo-glow">Tap buttons to explore</div>

  <a-scene
    embedded
    xr-mode-ui="enabled: false"
    device-orientation-permission-ui="enabled: false"
    background="color: #000"
    fog="type: linear; color: #000; near: 10; far: 15"
    raycaster="objects: .raycastable; far: 10; interval: 0"
    cursor="rayOrigin: mouse; fuse: false"
    loading-screen="enabled: false"
  >
    <!-- Assets (simple primitives, no external loads) -->
    <a-assets></a-assets>

    <!-- Camera with hand controls for mobile taps -->
    <a-entity id="rig" movement-controls>
      <a-camera position="0 1.6 0"></a-camera>
      <a-entity laser-controls="hand: right" raycaster="hand: right"></a-entity>
      <a-entity laser-controls="hand: left" raycaster="hand: left"></a-entity>
    </a-entity>

    <!-- Main Holographic Panel (anchored on detected plane) -->
    <a-entity id="panel" visible="false" position="0 0 -2">
      <!-- Glowing Base Plane -->
      <a-plane
        width="1.2" height="0.8"
        material="color: #0ff; opacity: 0.2; transparent: true; side: double; emissive: #0ff; emissiveIntensity: 0.5"
        animation="property: material.emissiveIntensity; to: 1; dir: alternate; dur: 2000; loop: true"
      ></a-plane>

      <!-- Interactive Buttons (raycastable for taps) -->
      <a-plane
        class="raycastable button" data-section="profile"
        position="-0.4 0.25 0.01" rotation="-90 0 0"
        width="0.35" height="0.12"
        material="color: #0ff; opacity: 0.3; transparent: true"
        text="value: Profile; align: center; color: #fff; width: 4"
        animation__enter="property: material.opacity; to: 0.7; startEvents: rayenter"
        animation__leave="property: material.opacity; to: 0.3; startEvents: rayleave"
        event-set__click="_event: raycaster-intersection; _target: #content; visible: true"
      ></a-plane>

      <a-plane
        class="raycastable button" data-section="experience"
        position="-0.4 0.05 0.01" rotation="-90 0 0"
        width="0.35" height="0.12"
        material="color: #0ff; opacity: 0.3; transparent: true"
        text="value: Experience; align: center; color: #fff; width: 4"
        animation__enter="property: material.opacity; to: 0.7; startEvents: rayenter"
        animation__leave="property: material.opacity; to: 0.3; startEvents: rayleave"
      ></a-plane>

      <a-plane
        class="raycastable button" data-section="projects"
        position="-0.4 -0.15 0.01" rotation="-90 0 0"
        width="0.35" height="0.12"
        material="color: #0ff; opacity: 0.3; transparent: true"
        text="value: Projects; align: center; color: #fff; width: 4"
        animation__enter="property: material.opacity; to: 0.7; startEvents: rayenter"
        animation__leave="property: material.opacity; to: 0.3; startEvents: rayleave"
      ></a-plane>

      <a-plane
        class="raycastable button" data-section="skills"
        position="0.4 0.25 0.01" rotation="-90 0 0"
        width="0.35" height="0.12"
        material="color: #0ff; opacity: 0.3; transparent: true"
        text="value: Skills; align: center; color: #fff; width: 4"
        animation__enter="property: material.opacity; to: 0.7; startEvents: rayenter"
        animation__leave="property: material.opacity; to: 0.3; startEvents: rayleave"
      ></a-plane>

      <a-plane
        class="raycastable button" data-section="research"
        position="0.4 0.05 0.01" rotation="-90 0 0"
        width="0.35" height="0.12"
        material="color: #0ff; opacity: 0.3; transparent: true"
        text="value: Research; align: center; color: #fff; width: 4"
        animation__enter="property: material.opacity; to: 0.7; startEvents: rayenter"
        animation__leave="property: material.opacity; to: 0.3; startEvents: rayleave"
      ></a-plane>

      <!-- Content Display (above panel) -->
      <a-entity id="content" position="0 0.5 0" visible="false">
        <!-- Dynamic content injected via JS -->
      </a-entity>
    </a-entity>

    <!-- Ambient Light for Holographic Glow -->
    <a-light type="ambient" color="#0ff" intensity="0.3"></a-light>
  </a-scene>

  <script>
    const sceneEl = document.querySelector('a-scene');
    const loader = document.getElementById('loader');
    const panelEl = document.getElementById('panel');
    const contentEl = document.getElementById('content');
    const enterBtn = document.getElementById('enter-ar');

    // Enter AR Mode
    function enterAR() {
      sceneEl.enterVR();
      loader.classList.add('hidden');
    }

    // Plane Detection: Anchor panel on horizontal surface
    sceneEl.addEventListener('xrplaneadd', (evt) => {
      if (evt.detail.plane.geometry === 'horizontal') {  // Ground/floor/table
        const planePose = evt.detail.plane.getPose();
        panelEl.setAttribute('position', planePose.transform.position);
        panelEl.setAttribute('rotation', { x: -90, y: 0, z: 0 });  // Lay flat
        panelEl.object3D.visible = true;
        document.getElementById('hint').style.display = 'block';
      }
    });

    // Button Interactions (tap to show section)
    sceneEl.addEventListener('click', (evt) => {
      const clicked = evt.detail.el;
      if (clicked.classList.contains('button')) {
        const section = clicked.getAttribute('data-section');
        showSection(section);
      }
    });

    function showSection(section) {
      contentEl.innerHTML = '';
      contentEl.setAttribute('visible', true);
      contentEl.setAttribute('position', '0 0.5 0');

      let contentHTML = '';
      switch (section) {
        case 'profile':
          contentHTML = `
            <a-text value="Nandini Lashkari\nImmersive Technology Developer" color="#0ff" align="center" width="4" position="0 0.2 0" class="holo-glow"></a-text>
            <a-text value="Email | LinkedIn | GitHub" color="#fff" align="center" width="4" position="0 0 0" class="holo-glow"></a-text>
            <a-entity position="0 -0.1 0">
              <a-link href="mailto:nandini@example.com" title="Email" color="#0ff" position="-0.3 0 0"></a-link>
              <a-link href="https://linkedin.com/in/nandinilashkari" title="LinkedIn" color="#0ff" position="0 0 0"></a-link>
              <a-link href="https://github.com/nandinilashkari" title="GitHub" color="#0ff" position="0.3 0 0"></a-link>
            </a-entity>
          `;
          break;
        case 'experience':
          contentHTML = `
            <a-text value="Experience Timeline" color="#0ff" align="center" width="4" position="0 0.3 0"></a-text>
            <a-cylinder position="0 0 0" radius="0.01" height="0.6" color="#0ff" opacity="0.5"></a-cylinder>
            <a-text value="2024: Meta AR/VR Intern\nImmersive prototypes with Unity & AR Foundation" color="#fff" align="center" width="3" position="0 0.15 0.01"></a-text>
            <a-text value="2023: Google XR Research Intern\nAI/ML in immersive spaces (Gemini API)" color="#fff" align="center" width="3" position="0 -0.15 0.01"></a-text>
          `;
          break;
        case 'projects':
          contentHTML = `
            <a-text value="Key Projects" color="#0ff" align="center" width="4" position="0 0.3 0"></a-text>
            <a-box position="-0.4 0 0" width="0.6" height="0.2" depth="0.02" color="#000" opacity="0.6"></a-box>
            <a-text value="AI InterviewBot\nGemini API + 3D Avatar" color="#0ff" position="-0.4 0.08 0.01" width="2.5"></a-text>
            <a-sphere position="0.4 0 0" radius="0.1" color="#0ff" opacity="0.7" animation="property: rotation; to: 0 360 0; dur: 10000; loop: true"></a-sphere> <!-- Stylized avatar -->
            <a-text value="VR Interior Design\nUnity WebGL Walkthrough" color="#0ff" position="-0.4 -0.2 0.01" width="2.5"></a-text>
            <a-text value="AR + IoT\nReal-time Integration" color="#0ff" position="0.4 -0.2 0.01" width="2.5"></a-text>
          `;
          break;
        case 'skills':
          contentHTML = `
            <a-text value="Tech Stack" color="#0ff" align="center" width="4" position="0 0.3 0"></a-text>
            <a-entity position="0 0 0" animation="property: rotation; to: 0 360 0; dur: 20000; loop: true">
              <a-box position="0 0.2 0" width="0.2" height="0.2" depth="0.1" color="#0ff" opacity="0.6"><a-text value="Unity" color="#fff" align="center" width="2"></a-text></a-box>
              <a-box position="0.3 0 0" width="0.2" height="0.2" depth="0.1" color="#0ff" opacity="0.6"><a-text value="WebGL" color="#fff" align="center" width="2"></a-text></a-box>
              <a-box position="0 -0.2 0" width="0.2" height="0.2" depth="0.1" color="#0ff" opacity="0.6"><a-text value="C#" color="#fff" align="center" width="2"></a-text></a-box>
              <a-box position="-0.3 0 0" width="0.2" height="0.2" depth="0.1" color="#0ff" opacity="0.6"><a-text value="Python" color="#fff" align="center" width="2"></a-text></a-box>
            </a-entity>
          `;
          break;
        case 'research':
          contentHTML = `
            <a-plane width="1" height="0.8" color="#000" opacity="0.5" position="0 0 -0.01"></a-plane>
            <a-text value="Research & Patents\n• Holographic Telepresence (Patent Pending)\n• Gesture Rec. in AR (IEEE 2024)\n• AI UI in XR (ACM 2025)\n• Springer: AI Avatars (2025)\n• YOLOv8 + AR Foundation" 
                     color="#0ff" width="3" align="center" position="0 0.2 0.01" wrap-count="40" class="holo-glow"></a-text>
          `;
          break;
      }
      contentEl.innerHTML = contentHTML;
    }

    // Fallback: If no XR, show 2D version after 5s
    setTimeout(() => {
      if (!sceneEl.is('entered')) {
        enterAR();
      }
    }, 5000);

    // Hide hint if no AR
    if (!navigator.xr) {
      document.getElementById('hint').innerHTML = 'AR not supported—viewing interactive 2D mode';
    }
  </script>
</body>
</html>